<!DOCTYPE html>
<html lang="en">
   <head>
      <link rel="stylesheet" type="text/css" href="grid12.css">
      <link rel="stylesheet" type="text/css" href="lite.css">
      <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
      <script type="text/javascript">
         function getr()
                  {
              var N = parseFloat(document.calcit.dat1.value);
              var k = parseFloat(document.calcit.dat2.value);
              var covlo = parseFloat(document.calcit.dat3.value);
              var covhi = parseFloat(document.calcit.dat4.value);
              var nRuns = parseFloat(document.calcit.dat5.value);
           var cov=new Array();
           var reliability=0;
           for (iRun=1; iRun<=nRuns; iRun++) {
         var z = new Array();
         for (var i=0; i<=N-1; i++) {        z[i]=  jStat.randn(0,1);              }
         var sampmean=jStat.mean(z);
         var sampsd=jStat.stdev(z,true);
         var lolimit=sampmean-k*sampsd;
         var hilimit=sampmean+k*sampsd;
         cov[i]=jStat.normal.cdf(hilimit,0,1)-jStat.normal.cdf(lolimit,0,1);
         if(cov[i]<=covhi && cov[i]>=covlo) reliability=reliability+1
           }
         reliability=Math.round(reliability)/nRuns;
         
         document.getElementById("result").innerText = 
         "For a sample size of " + N + ", we define the control range as below: \n\n [(sample mean) +/- "+ k +" * (sample standard deviation)] \n\n "+
         "The following simulations assume that the population is normally distributed, and the sample is a random sample. "+
         "For each individual sample (1 simulation), we check whether the calculated control range covers "+
         "between "+ covlo +" and "+ covhi +" of the true population. After performing "+ nRuns +" simulations, "+ 
         "we check the proportion of them with control range covering between "+ covlo +" and "+ covhi +" of the true population. " +
         "This proportion is defined as the reliability value, which is "+ reliability + " here.";
         }
           
      </script>
   </head>
   <body>
      <div class="container-fluid">
         <div class="row">
            <div class="col-lg-2 col-md-2 col-sm-2"></div>
            <div class="col-lg-7 col-md-7 col-sm-7">
               <form name="calcit" onkeypress="return event.keyCode != 13;">
                  <h1 style="text-align: center"> Reliability Calculator </h1>
                  <table width="100%">
                     <tr>
                        <td style="text-align: right">Sample Size (such as 100):</td>
                        <td><input name="dat1" type="number" </td>
                     </tr>
                     <tr>
                        <td style="text-align: right">K (2 or 3):</td>
                        <td><input name="dat2" type="number"  </td>
                     </tr>
                     <tr>
                        <td style="text-align: right">Lower Proximity Limit (such as 0.94):</td>
                        <td><input name="dat3" type="number"  </td>
                     </tr>
                     <tr>
                        <td style="text-align: right">Higher Proximity Limit (such as 0.96):</td>
                        <td><input name="dat4" type="number"  </td>
                     </tr>
                     <tr>
                        <td style="text-align: right">Number of Simulations (10000 or more):</td>
                        <td><input name="dat5" type="number"  </td>
                     </tr>
                     <tr>
                        <td></td>
                        <td style="text-align: left"><input onclick="getr()" type="button" value="Calculate" ></td>
                     </tr>
                  </table>
                  <p style="text-align: center;"> <span style="color:blue; font-size:17px"  id="result" > </span></p>
            </div>
            </form>
         </div>
         <div class="col-lg-3 col-md-3 col-sm-3">        
         </div>
      </div>
      </div>
   </body>
</html>
